# Enhancing The Art Scene's online presence
## Why?

Percentage above average
Month where most are above average
Walk in vs online revenue
Metro vs regional

> Bottom line is we can do better! *Here's how*.

<table>
<thead>
<th><th>
<th><th>
</thead>
<tbody>
<tr>
<td>Gross annual revenue</td>
<td><strong>$350,075</strong></td>
</tr>
<tr>
<td>Total purchases</td>
<td><strong>3051</strong></td>
</tr>

<tr>
<td>Buyers</td>
<td>
<small>
<li><strong>  2461</strong> unique buyers.</li><li><strong>   365 (14.83%)</strong> buyers made multiple purchases.</li>
<li><strong>    1.239 average</strong>     purchases per buyer.
</li>
</small>
</td>
</tr>

<tr>
<td>Purchase Value</td>
<td>
<small>
<li><strong>$114.74 average spend</strong></li>
<li><strong>$69.8 median spend</strong></li>
<li>Lower average deviation <strong>$31.64</strong></li>
<li>Upper average deviation <strong>$197.84</strong></li>
<li><strong>72.14%</strong> purchases within average deviance range</li>
<li><strong>30.50% above</strong> and <strong>69.48% below</strong> average spend</li>
</small>
</tr>
</tbody>
</table>

### Thoughts
- average spend is below minimum metropolitan free freight tier. Could lowering the free freight tier encourage sales?
- **November** was the most active month, averaging **10.48 purchases per non-sale day** and **15.43 on sale days**. **Average purchase value** on **non-sale** days was **$84.03**, and **$132.31** on **sale days**.
- Whilst **July** ranked **7th** for **total orders** it ranked **2nd** for **average purchase value** at **$124.36**.
- Note Victoria's performance against population ratio is lower than that of other states. I'd attribute this to the strength of Victorian competitors.

> Further points for consideration
- Conversion rates (buyers versus browsers)
- metropolitan versus regional customers
- search effectiveness

<iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1YA35gMk1gG6p1CEZsvmniSTxyl8o0zsFoDPKxz3B6ik/pubchart?oid=956930988&amp;format=interactive"></iframe>

<iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1YA35gMk1gG6p1CEZsvmniSTxyl8o0zsFoDPKxz3B6ik/pubchart?oid=2009534723&amp;format=interactive"></iframe>

<iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1YA35gMk1gG6p1CEZsvmniSTxyl8o0zsFoDPKxz3B6ik/pubchart?oid=1959783002&amp;format=interactive"></iframe>

<iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1YA35gMk1gG6p1CEZsvmniSTxyl8o0zsFoDPKxz3B6ik/pubchart?oid=1730893746&amp;format=interactive"></iframe>

<iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1YA35gMk1gG6p1CEZsvmniSTxyl8o0zsFoDPKxz3B6ik/pubchart?oid=1593844079&amp;format=interactive"></iframe>

<iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1YA35gMk1gG6p1CEZsvmniSTxyl8o0zsFoDPKxz3B6ik/pubchart?oid=870024255&amp;format=interactive"></iframe>

<iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1YA35gMk1gG6p1CEZsvmniSTxyl8o0zsFoDPKxz3B6ik/pubchart?oid=1578557916&amp;format=interactive"></iframe>

## What?
- independence
- ownership
 
### Why Ruby
Concerned about Ruby, you might have seen [this](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html). In their own words,

> the TIOBE Programming Community index is an indicator of the popularity of **programming languages**[*ed. emphasis mine*]... The ratings are based on the number of skilled engineers world-wide, courses and third party vendors. *Popular search engines such as Google, Bing, Yahoo!, Wikipedia, Amazon, YouTube and Baidu are used to calculate the ratings*[*ed. emphasis mine*]. **It is important to note that the TIOBE index is not about the best programming language or the language in which most lines of code have been written.** 

But [**Ruby's not going away**](http://githut.info/)

Ruby on Rails (or just “Rails” for short) is a web development framework written in the Ruby programming language. Since its debut in 2004, Ruby on Rails has rapidly become one of the most powerful and popular tools for building dynamic web applications. Rails is used by companies as diverse as Airbnb, Basecamp, Disney, GitHub, Hulu, Kickstarter, Shopify, Twitter, and the Yellow Pages. There are also many web development shops that specialize in Rails, such as ENTP, thoughtbot, Pivotal Labs, Hashrocket, and HappyFunCorp, plus innumerable independent consultants, trainers, and contractors.
https://www.railstutorial.org/book/beginning

#### Who's using Ruby
A selection of companies actively developing with and contributing to Ruby and Ruby on Rails.

- [Shopify](https://www.shopify.com/)
- [Groupon](http://www.groupon.com.au/)
- [Airbnb](https://www.airbnb.com.au/)
- [Basecamp](https://basecamp.com/)
- [Soundcloud](https://soundcloud.com/)
- [Twitter](https://twitter.com/)
- [Bloomberg](http://www.bloomberg.com/)
- [Indiegogo](https://www.indiegogo.com/)
- [Heroku](https://www.heroku.com/)
- [Github](https://github.com/)

## How?
- opensource
- 

## When?


---

# SEO

Online visibility is directly proportional to the quality of content presented. Google explains that SEO is really quite simple and in fact discourages, even excludes sites employing deceptive techniques to fool search engines. To summarise, content is king.

Steps to a Google friendly site

Effective Search Engine Optimisation (SEO), needn't be  [Principles of Site Design](https://developers.google.com/web/fundamentals/principles/)

## A brief investigation of artscene.com.au's current SEO performance
> **Organic Page Ranking is considerably lower than competitors' when searching broadly for 'art supplies' but improves when searching for brands such as 'schmincke'.**

To test, open a *New Incognito Window* in Chrome and [search google.com for 'art supplies'](https://www.google.com.au/?gfe_rd=cr&ei=sufiVfmqM7Du8wftxZ6IAg&gws_rd=ssl#q=art+supplies&start=0), artscene.com.au is listed **mid way down the second page of results**. Results improve when searching for ['art supplies sydney'](https://www.google.com.au/?gfe_rd=cr&ei=sufiVfmqM7Du8wftxZ6IAg&gws_rd=ssl#q=art+supplies+sydney) or ['art materials'](https://www.google.com.au/?gfe_rd=cr&ei=sufiVfmqM7Du8wftxZ6IAg&gws_rd=ssl#q=art+materials) bringing the listing up on to the first page. 

[This link ranks 5th](www.artscene.com.au/shopping/colour---watercolour/watercolour-paints/schmincke-horadam-aquarell) for keyword 'schmincke' after [Melbourne Etching Supplies' listing](http://www.mes.net.au/category/176-watercolours-schmincke). Great, but for the prompt stating 'No Product found!' and subsequent redirect to the home page -- the behaviour corrected itself after the third attempt to access the page via google. A second brand query, this time 'gamblin', fared better, ranking 2nd to Gamblin's own page. But again a prompt stating 'No Product found!' and redirection...


## Page Speed
[PageSpeed Insights Rules](https://developers.google.com/speed/docs/insights/rules)

[Google PageSpeed Insights: Desktop](https://developers.google.com/speed/pagespeed/insights/?url=artscene.com.au&tab=desktop)

[Google PageSpeed Insights: Mobile](https://developers.google.com/speed/pagespeed/insights/?url=artscene.com.au&tab=mobile)


### Asset optimisation
**Image assets** form the bulk of requests to most sites and take the lion's share of server resources, mainly bandwidth, which in most cases is billed per megabyte by hosting companies. *Google Chrome's Developer Tools Network Analysis* reports **72 requests**, **totalling 13,100kB** when mimicing a **first time visitor**, with **no cached assets** (caching is the process of storing downloaded files locally to avoid doing so a second time). Each request is a round trip from client to server and is clearly felt when accessing the site from handheld devices. So not only are **large assets expensive to host, they delay page rendering and draw a penalty in Google's page ranking.**

Further investigation of Google Chrome's Network Analysis revealed the following image request;

<table>
<thead>
<th>
</th>
</thead>
<tbody>

<tr>
<td>
Filename
</td>
<td>
<strong><a href="http://www.artscene.com.au/images/cms/1/slideshow/derivan.jpg" target="_blank">derivan.jpg</a></strong>
</td>
</tr>

<tr>
<td>
Asset Dimensions
</td>
<td>
<strong>9449 x 3740 pixels</strong>
</td>
</tr>
<tr>
<td>
Context in page (container dimensions)
</td>
<td>
<strong>769 x 248 pixels</strong>
</td>
</tr>
<tr>
<td>
Original Filesize
</td>
<td>
<strong>5400kB</strong>
</td>
</tr>
<tr>
<td>
Downloaded in
</td>
<td>
<strong>6.54s</strong>
</td>
</tr>
</table>

There's another two massive images ([1[4400kB]](http://www.artscene.com.au/images/cms/1/slideshow/matisse.jpg), [2[769kB]](http://www.artscene.com.au/images/cms/1/banners/bottomhomepage%20web.jpg)) in all sharing ~80.68% of the total page weight (13,100kB). 

[Queue WebP Image Format](https://developers.google.com/speed/webp/docs/using)
[Can I Use: WebP Image Format](http://caniuse.com/#feat=webp)
[Can I Use: HTML5 Picture Element](http://caniuse.com/#feat=picture)

```
# Quick and dirty two step compression with libvips
$ vipsthumbnail /home/user/Downloads/derivan.jpg --size 769 -o /home/user/Downloads/derivan_compressed.jpg[strip]

$ vips webpsave /home/user/Downloads/derivan_compressed.jpg --strip /home/user/Downloads/derivan_compressed.webp --Q=70
```

After conversion the image weighs in at **~12.2kB**, and is **99.77% smaller** than the original at ~5,400kB. This is an extreme example but highlights the importance of appropriate asset management. Similar reductions can be had for all assets minimising (paid) bandwidth consumption and decreasing the time to full page render, happy boss, happy customer, low hangin

Asset optimisation, HTML5 picture element allows modern image file formats such as webp 
http://artscene.com.au/ 

Client-side JavaScript applications are damn fast. In a traditional server-rendered application, every user interaction has to confer with a server far away in a data center about what to do. This can be fast under optimal scenarios, if you have a fast server in a fast data center connected to a user with a fast connection and a fast device. That’s a lot of “ifs” to be hanging the performance of your UI on.
http://tomdale.net/2015/02/youre-missing-the-point-of-server-side-rendered-javascript-apps/

<table>
<thead>
<th>
</th>
</thead>
<tbody>
<tr>
<td>
Server Response Speed	 
</td>
<td>
<strong>0.754 seconds</strong>
</td>
</tr>
<tr>
<td>
Page Load Speed
</td>
<td>
<strong>11.70s</strong>
</td>
</tr>
<tr>
<td>
Requests
</td>
<td>
<strong>	72</strong>
</td>
</tr>
<tr>
<td>
Downloaded
</td>
<td>
<strong>	13.1MB</strong>
</td>
</tr>
<tr>
<td>
Downloaded
</td>
<td>
<strong>	13.1MB</strong>
</td>
</tr>
</tbody>
</table>

```html
<div id="wrapper">
  <div id="content">
    <div>
      <div id="homeSection">
        <div id="featSection">

          ...
            <img src="/images/cms/1/Shopping/products/gei-group.jpg" title="GEI_GROUP" style="max-height:97px;max-width: 125px;" alt="" class="mainImage">
          ...

        </div>
      </div>
    </div>
  </div>
</div>
```

In lieu of reliable data, I turned to dubious sources for some kind http://www.slinqs.com/en/site/artscene.com.au
<table>
<thead>
<th>
</th>
</thead>
<tbody>
<tr>
<td>
Google Analytics ID
</td>
<td>
<strong>UA-46392601-1</strong>
</td>
</tr>

<tr>
<td>
Page Views per Visit	: 
</td>
<td>
<strong>2.20</strong>
</td>
</tr>

<tr>
<td>
Bounce Rate	: 
</td>
<td>
<strong>77.8%</strong>
</td>
</tr>

<tr>
<td>
Time on Site: 
</td>

<td>
<strong>2 min 4 sec</strong>
</td>
</tr>
</tbody>
</table>

---

# Budget
https://ninefold.com/pricing-detail/

https://www.netlogistics.com.au/

## Running Costs

|                                           | Shopify Basic |      | Shopify Professional |      | Shopify Unlimited |       | Spree     |      | Magento |   |   |
|-------------------------------------------|---------------|------|----------------------|------|-------------------|-------|-----------|------|---------|---|---|
| Features                                  | Possible      | Cost | Possible             | Cost | Possible          | Cost  | Possible  | Cost |         |   |   |
| POS                                       | Yes           |      | Yes                  |      | Yes               |       | No        |      |         |   |   |
| 1 GB file storage                         | Yes           |      | Yes                  |      | Yes               |       | Yes       |      |         |   |   |
| Unlimited products                        | Yes           |      | Yes                  |      | Yes               |       | Yes       |      |         |   |   |
| 24/7 Support                              | Yes           |      | Yes                  |      | Yes               |       | No        |      |         |   |   |
| Discount code engine                      | Yes           |      | Yes                  |      | Yes               |       | Yes       |      |         |   |   |
| 2.0% Transaction fee                      | Yes           |      | Yes                  |      | Yes               |       | No        |      |         |   |   |
| Fraud analysis tools                      | No            |      | Yes                  |      | Yes               |       | Yes       |      |         |   |   |
| Gift cards                                | No            |      | Yes                  |      | Yes               |       | Yes       |      |         |   |   |
| Professional reports                      | No            |      | Yes                  |      | Yes               |       | Yes       |      |         |   |   |
| Abandoned cart recovery                   | No            |      | Yes                  |      | Yes               |       | Yes       |      |         |   |   |
| Advanced report builder                   | No            |      | No                   |      | Yes               |       | Yes       |      |         |   |   |
| Real-time carrier shipping                | No            |      | No                   |      | Yes               |       | No        |      |         |   |   |
| Host                                      | Yes           |      | Yes                  |      | Yes               |       | Ninefold  | 50   |         |   |   |
| Content Delivery Network                  | Yes           |      | Yes                  |      | Yes               |       | AWS       |      |         |   |   |
| Transactional and Marketing Email Service | Yes           |      | Yes                  |      | Yes               |       | Mailchimp | 33   |         |   |   |
| Custom Code Modification                  | No            |      | No                   |      | No                |       | Yes       |      |         |   |   |
| Vendor Lockin                             | Yes           |      | Yes                  |      | Yes               |       | No        |      |         |   |   |
| **Minimum Expense per Month**             |               |**29**|                      |**79**|                   |**179**|           |**83**|         |   |   |

[Source](/home/user/Documents/webdev/future_projects/theartscene/demonstrations/expenses/MonthlyCost.csv)

---

# The importance of communication

---

# Roadmap

The rollout schedule defines **three distinct phases**. Each phase builds on the last but is complete in itself. The schedule is mapped below, and can be tracked on these trello boards -- [quick overview of board structure here](https://trello.com/c/SbNzZzei/6-the-state-of-affairs);

- [Phase One](https://trello.com/b/5oYSsGbD/phase-one-the-art-scene-on-spree)
- [Phase Two](https://trello.com/b/qZVjhuiK/phase-two-the-art-scene-on-spree)
- [Phase Two](https://trello.com/b/GjXeXy9q/phase-three-the-art-scene-on-spree)
  
We've no small project here. Spree takes care of the foundation.  we're to make headway then we will do so in stages. Building to some arbitrary point in the future will 

The highest priority for [Australian Art Supplies](http://www.australianartsupplies.com.au/) redesign layout, optimise for search engines (SEO) 


## First Phase 
> Basic Spree implementation with enhanced data for priority inventory items.


Launch leading into Annual Sale
Allow adequate time for;
- real world testing and debugging, 
- staff development 
- development of curated marketing material/campaign

> Target: **Monday 7 November**

---

1. Configure Spree 
  - Product Properties
  - Product Option Types
  - Prepare majority of current **data** for Spree ingest
  - **Restyle** front and backend views
     - Configure **customer registration**
     - Registration Form
         - ~~Login via social network~~
  - Implement **Payment Gateway** and **Single Page Checkout**
  - Configure **flat Shipping Rates**, **Carriers** and **Options**
  - Configure **User Roles**, priveleges and authorisation etc.
  - Format **order documents**
     - invoices
     - pick slips
     - ~~shipping labels~~
     - ~~shipping manifest~~
  - Format **transactional emails**
  - Basic **SEO** optimisations as per Google guidelines
     - Schema.org markup
     - Breadcrumbs
     - Pagination markup
     - Meaningful Page Title Optimisation
     - Meaningful Page Descriptions
     - Content for Google Snippets
     - Meaningful Canonical URLS
      - And redirects to preserve ranking for existing urls
2. Revisions and further testing ~ **two weeks**
3. Training ~ **one to two weeks**
    - Write documentation 
        - Procedural
            - Admin
            - Clerical
    - Instruct users

4. Reporting and Research
   - Analytics
   - Sales by time period
   - Profit/Loss: Profit/Loss report ie. = gross - (cost_price + postage + promotions)
        - revenue last n days
        - % change revenue since n days
    - GST
    - Abandoned shopping carts
    - Stock
        - Inventory Levels
        - Popular products
    - User Activity: Identify frequent buyers and visitors. To assist targeted email campaigns
        - visitors last n days
        - % change visitors last n days

5. **Pre-launch** -- [see Trello]()
  - Prepare production and staging servers

6. **Launch**


7. **Post-launch**
---

## Phase Two
> Support multiple domains and stores management

> Target: **Mid January 2016**

---

1. **Stores Management** [see Trello](https://trello.com/c/u5PsoPhJ/10-mutli-domain-stores-management)
  - Merge Mitchel School of Art with ArtScene domain | [see Trello](https://trello.com/c/zNwqoTut/8-merge-mitchel-school-of-art-with-artscene-domain)

2. **Documentation**
  - Extend scope and improve development documentation
  - Extend end-user tutorials

3. Frontend **Optimisation**
  - Consider *New Relic's* code performance analysis and optimise according to findings. Priority will be given to;
     - Improving efficiency of slow database queries
     - Maximising cache utilisation

     Performant database queries and consequently improved page render speed 

Also the performance implications. client-side templating shifts massive load from server and creates a faster, smoother overall experience. The whole idea of "single page" (one page load) is better UX and offloading needless server cycles... So right, it get's silly sometimes when people criticize newer frameworks. Some of the arguments are wrong-headed critiques on client-side templating itself.

  - Extend Spree API endpoints to support further frontend development, ala **Angular**, see [**Sprangular: Spree out back + Angular up front**](http://sprangular-demo.herokuapp.com/#!/) Dynamic views rendered client-side, minimise server load

4. Strengthen customer relations and improve shopping experience
  - with email @MailChimp | [see Trello](https://trello.com/c/9hUUzynC/11-communications)
      > ! Opt-in upsell assistant | [explained further at Trello](https://trello.com/c/traVX7Bp/9-opt-in-up-sell-assistant)

5. Product Bundling and Kits
Provision product grouping capabilities Promotional incentives for TAFE, School and Mitchell School of Art Kits

---

## Phase Three


---

1. Blogging
   - Staff Recommendations
   - Guest Posts

2. Visitor Feedback
   - Reviews 

3. Improved Copywriting

4. Support paid sponsorship and advertising real-estate
  - Provision application process for *paid* sponsorship. With a view to encouraging sponsorship of prominent artists/customers, suppliers/manufacturers  via customer sites: offer sell space on Art Scene Blog, Facebook, Google and Twitter for Art Scene logo placement and backlinks on the customer's portfolio site, blog or whatever.

5. Improved data import/export process

---

## Future Developments
Further **strategic** deployments responding to data analysis and feedback


## Far Future Prospects
- Schema linkup, making data consumable for Attache and/or Retail Express POS API


---

# Documentation

---

## Establishing a containerised Development Environment with Docker

### Docker?

Docker is a tool which allows developers to define containers for applications; this allows for control over the operating system and software running the application. If you’re running against an older version of Postgresql, a patched version of Ruby, or other dependencies which make setting up a development environment difficult, Docker may simplify development across a team. Even without complicated dependencies, forced encapsulation within a VM ensures development parity across a team and, if deploying with Docker to staging or production, across environments.
-- [Source](https://robots.thoughtbot.com/rails-on-docker)

[See the Docker **tutorial**](https://www.docker.com/tryit/)

Docker (with the orchestration tooling provided by Compose) provides us the ability to:

- Upgrade versions of Ruby or Node (or whatever runtime your app requires) in production with far less infrastructure coordination than normally required.

- Reduce the number of moving parts in the deployment process. Instead of writing complex Puppet and Capistrano deployment scripts, our deployments will now center around moving images around and starting containers.

- Simplify developer onboarding by standardizing your team on the same machine images.

http://blog.carbonfive.com/2015/03/17/docker-rails-docker-compose-together-in-your-development-workflow/

http://bradgessler.com/articles/docker-bundler/

## Writing the Dockerfile

[Source](https://robots.thoughtbot.com/rails-on-docker)
```
FROM ruby:2.2.2

RUN apt-get update -qq && apt-get install -y build-essential

# for postgres
RUN apt-get install -y libpq-dev

# for nokogiri
# RUN apt-get install -y libxml2-dev libxslt1-dev

# for capybara-webkit
# RUN apt-get install -y libqt4-webkit libqt4-dev xvfb

# for a JS runtime
RUN apt-get install -y nodejs

ENV APP_HOME /the_art_scene

RUN mkdir $APP_HOME
WORKDIR $APP_HOME

# Bring down the git repository
RUN git clone -b refresh git@bitbucket.org:piktur/the_art_scene.git

# ADD Gemfile* $APP_HOME/
RUN bundle install

ADD . $APP_HOME
```

[Source](http://blog.carbonfive.com/2015/03/17/docker-rails-docker-compose-together-in-your-development-workflow/)
```
FROM ruby:2.2.0
RUN apt-get update -qq && apt-get install -y build-essential nodejs npm nodejs-legacy mysql-client vim
RUN npm install -g phantomjs

RUN mkdir /myapp

WORKDIR /tmp
COPY Gemfile Gemfile
COPY Gemfile.lock Gemfile.lock
RUN bundle install

ADD . /myapp
WORKDIR /myapp
RUN RAILS_ENV=production bundle exec rake assets:precompile --trace
CMD ["rails","server","-b","0.0.0.0"]
```

```
# https://registry.hub.docker.com/_/rails/

# Select ubuntu as the base image
FROM ubuntu

# Install nginx, nodejs and curl
RUN apt-get update -q
RUN apt-get install -qy nginx
RUN apt-get install -qy curl
RUN apt-get install -qy nodejs
RUN echo "daemon off;" >> /etc/nginx/nginx.conf

# Install rvm, ruby, bundler
RUN curl -sSL https://get.rvm.io | bash -s stable
RUN /bin/bash -l -c "rvm requirements"
RUN /bin/bash -l -c "rvm install 2.1.0"
RUN /bin/bash -l -c "gem install bundler --no-ri --no-rdoc"

# Add configuration files in repository to filesystem
ADD config/container/nginx-sites.conf /etc/nginx/sites-enabled/default
ADD config/container/start-server.sh /usr/bin/start-server
RUN chmod +x /usr/bin/start-server

# Add rails project to project directory
ADD ./ /rails

# set WORKDIR
WORKDIR /rails

# bundle install
RUN /bin/bash -l -c "bundle install"

# Publish port 80
EXPOSE 80

# Startup commands
ENTRYPOINT /usr/bin/start-server
```

---

## Install Postgres database

```
$ sudo apt-get install postgresql postgresql-contrib libpq-dev

# Create postgres user 
$ sudo -u postgres createuser -s theartscene

# Start postgres console 
$ sudo -u postgres psql

# Define password for database user 
> \password [db_name]

> \quit
```

# Generate a new rails application with postgres db 

``` 
# -T flag to avoid unnecessary /test dir, we'll be using RSpec for tests
$ rails _4.2.2_ new app_name -d postgresql -T
```

# Initialise a git repository

```
$ git init
$ git add -A
$ git commit -a -m "Prepare initial deploy to heroku"
```


## Create an heroku instance

```
$ heroku login
$ heroku create

# Create postgres db, the heroku free-tier  entitles users to 'hobby-dev' plan
$ heroku addons:create heroku-postgresql:hobby-dev

```

Update Gemfile including relevant gems, ensure the following for compatibility with heroku.

```ruby

group :production do
    gem 'pg'
    gem 'rails_12factor'
end

``` 

And ```gem 'figaro'``` to manage sensitive environment variables such as API keys, passwords etc.

```
$ bundle install --without production
```

Once figaro is installed, create **config/application.yml** and add a rule to **~/.gitignore** excluding it from the repo. Now add relevant private keys to **application.yml**

Set database configuration in **config/database.yml**, as per example.

```yml

development:
  adapter: postgresql
  encoding: unicode
  database: theartscene_development
  pool: 5
  username: <%= ENV['DB_USER'] %>
  password: <%= ENV['DB_PASSWORD'] %>
  host: localhost

```

```
# Create the database
$ bundle exec rake db:create

# Build the table schema
$ bundle exec rake db:migrate

# Once the db exists, check the app runs.

$ rails s 
```

-----

## Basic Spree Configuration
Heroku simplifies deployment significantly, we'll deploy to the heroku *cedar stack* during development. See [Deploying to Heroku](https://guides.spreecommerce.com/developer/heroku.html) for further information on heroku specific Spree configuration.

```ruby
# Append to config/application.rb

config.assets.initialize_on_precompile = false
```

### Installing Spree & Extensions

We're going to lock down to version **3-0-stable** and work with *cloned* local copies of Spree and relevant extensions. As per Rails convention, we'll store extensions within the host app **~/vendor/extensions** directory. We'll maintain test code and *dummy* apps for testing purposes here. 

> TODO: Consider maintaing *submodule* repositories rather than the hulking conglomerate of cloned repos.

```
$ cd vendor/extensions

$ git clone -b 3-0-stable https://github.com/spree/spree.git
$ git clone -b 3-0-stable https://github.com/spree/spree_auth_devise.git
$ git clone -b 3-0-stable https://github.com/spree-contrib/spree_i18n.git
$ git clone -b 3-0-stable https://github.com/spree/spree_gateway.git
$ git clone -b 3-0-stable https://github.com/spree-contrib/spree_multi_currency.git
$ git clone -b 3-0-stable https://github.com/spree-contrib/spree-multi-domain.git
$ git clone -b 3-0-stable https://github.com/dickies-co-uk/spree_price_books.git
$ git clone -b 3-0-stable https://github.com/spree-contrib/spree_volume_pricing.git
$ git clone -b 3-stable  https://github.com/DynamoMTL/spree_chimpy.git
```

```ruby
# ~/Gemfile
gem 'spree', 
    path: 'vendor/extensions/spree'

gem 'spree_auth_devise'
    path: 'vendor/extensions/spree_auth_devise'
.
.
.

```

### Generate test applications for each Spree extension

```
$ cd ~/vendor/extensions/[extension_dir]
$ bundle exec rake test_app
```

### Run Spree installation executing the following tasks.

```
$ rails g spree:install --migrate=false --sample=false --seed=false
$ bundle exec rake railties:install:migrations
$ bundle exec rake db:migrate
$ bundle exec rake db:seed
```


### Authentication with Devise

Spree [Devise](https://github.com/plataformatec/devise) integration [spree_auth_devise](https://github.com/spree/spree_auth_devise)


```
$ bundle exec rake spree_auth:install:migrations
$ bundle exec rake db:migrate
$ bundle exec rails g spree:auth:install

# Create admin if none already
$ bundle exec rake spree_auth:admin:create
```


### Managing Translations
[Rails Internationalization (I18n) API](http://guides.rubyonrails.org/i18n.html)

```
$ bundle exec rails g spree_i18n:install
```


### Managing Payment Options

```
$ bundle exec rails g spree_gateway:install

```


### Managing Multiple Store Fronts

```
# Domains
$ bundle exec rails g spree_multi_domain:install

# Currencies
$ bundle exec rails g spree_multi_currency:install

# Pricing
$ bundle exec rails g spree_price_books:install
# Seed common conversion rates
$ bundle exec rake price_books:currency_rates

```


### Managing Volume Pricing

```
$ bundle exec rails g spree_volume_pricing:install

```


### Managing Transactional and Marketing Mail

```
$ bundle exec rails g spree_chimpy:install
```


### Working with Sample data

```
$ bundle exec rake spree_sample:load
```

---


## Testing with RSpec
Having a good test suite will allow us to refactor our code with confidence, changing its form without changing its function. **rspec-rails** extends **RSpec** and **Ruby on Rails** so it is possible to specify the behaviour of our rails web-app.

Ensure the following in **~/Gemfile**

```ruby

group :development, test do
    gem 'rspec-rails'
end

```

```
$ bundle exec rails generate rspec:install
```

Run tests with```$ bundle exec rake```

---

## Initial Deploy

> Further advice on Spree deployment [here](https://guides.spreecommerce.com/developer/manual-ubuntu.html)


```
$ git add -A
$ git commit -a -m "Deploy base Spreeified Rails application"
$ git push origin --all
```

Check the production database credentials and add them to **application.yml** we'll need the user, password, host and url variables.
```
# Check heroku database credentials
$ heroku pg:credentials DATABASE
```

Set additional production environment variables
```
$ figaro heroku:set -e production
```

Precompile production assets locally, ensure connection to production database is possible.

```
$ RAILS_ENV=production bundle exec rake assets:precompile
```

```
$ git commit -am "Precompile production assets"
$ git push origin master
$ git push heroku master
```

```
$ git push heroku master

# Establish db schema
$ heroku run rake db:migrate

# Create an adminstrator
$ heroku run rake spree_auth:admin:create

# View public site in browser
$ heroku open

```

> Note to push an alternate branch to heroku use ```$ git push -f heroku [alternate_branch]:master```

## Continuous Integration

Continuous Integration (CI) is a software development practice where members of a team integrate their work as frequently as possible to reduce integration problems and code conflicts. Every push to a source code repository is verified by an automated build and a test suite to detect errors as quickly as possible. A good CI tool also has a good notification system which effectively notifies all the team members about conflicts and issues with their code.

Writing software is error prone and riddled with problems. This is often amplified when working in larger teams as you try to integrate each other's code. Continuous integration, or CI for short, is a development practice whereby team members integrate their work as frequently as possible; it is normally achieved by having software automate the running of a test suite.

-- [Source](https://infinum.co/the-capsized-eight/articles/a-ruby-on-rails-continous-integration-process-using-semaphore-github-codeclimate-and-hipchat)

### Requirements
- Must be hosted
- Free
- Fast
- Compatible with BitBucket repos

### Semaphore
https://semaphoreci.com/blog/2014/10/14/continuous-integration-bitbucket.html

### Wercker

---

# The Tech Stack

<style>
.stack td {background-color: white !important}
.flex-container {
  display: flex;
  flex-flow: row wrap;
  justify-content: center;
  margin-bottom: 20px;
}
.flex-item {
  margin: 0 10px;
  
}
.flex-item p {
  margin-bottom: 5px;
}
.flex-item img,
.flex-item .caption {
  display: block;
  width: 100px;
}
.title {
  font-weight: bold;
  text-align: center !important;
}
small {
  line-height: 20px;
}
</style>


<div class='stack flex-container'>
<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/534796019356012545/6G46CP-7.png" width="100"/>
<p class='title'>Spree</p>
<small class='caption'>Spree motherfucker</small>
</div>
</div>

<div class='stack flex-container'>
<div class='flex-item'>
<img src="http://img.stackshare.io/service/989/ruby.png" width="100"/>
<p class='title'>Ruby</p>
<small class='caption'>Ruby great sntax blah</small>
</div>
<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/378800000296761640/2e69482e09113a93ccdd109c36f7fca7.png" width="100"/>
<p class='title'>Ruby on Rails</p>
<small class='caption'>Ruby great sntax blah</small>
</div>
<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/502171183144378368/ASOhU5xJ.png
" width="100"/>
<p class='title'>Postgres</p>
<small class='caption'>Ruby great sntax blah</small>
</div>
<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/494226256276123648/GWnVTc9j.png" width="100"/>
<p class='title'>Node.js</p>
<small class='caption'>Ruby great sntax blah</small>
</div>
<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/481100232273317888/YMxUfyWf.png" width="100"/>
<p class='title'>NGINX</p>
<small class='caption'>Ruby great sntax blah</small>
</div>
</div>

<div class='stack flex-container'>
<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/59268975/jquery_avatar.png" width="100"/>
<p class='title'>jQuery</p>
<small class='caption'>Ruby great sntax blah</small>
</div>

<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/563544962109693952/C9QJ7V3X.png" width="100"/>
<p class='title'>Bootstrap</p>
<small class='caption'>Ruby great sntax blah</small>
<p></p>
</div>

<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/583681608269471744/jCR2zNJV.png" width="100"/>
<p class='title'>Sass</p>
<small class='caption'>Ruby great sntax blah</small>
</div>

<div class='flex-item'>
<img src="http://img.stackshare.io/service/1019/square.png" width="100"/>
<p class='title'>Angular</p>
<small class='caption'>Ruby great sntax blah</small>
</div>
</div>

<div class='stack flex-container'>
<div class='flex-item'>
<img src="http://img.stackshare.io/service/897/S67KcxKE.png" width="100"/>
<p class='title'>Wercker</p>
<small class='caption'>Ruby great sntax blah</small>
</div>

<div class='flex-item'>
<img src="http://img.stackshare.io/service/773/6394678.png" width="100"/>
<p class='title'>Docker</p>
<small class='caption'>Ruby great sntax blah</small>
</div>

<div class='flex-item'>
<img src="http://img.stackshare.io/service/667/9f2d5f7bc82e45cc36feead4f625bb16.jpeg" width="100"/>
<p class='title'>ninefold</p>
<small class='caption'>Ruby great sntax blah</small>
</div>
</div>

### Third-Party Services
<div class='stack flex-container'>
<div class='flex-item'>
<img src="http://img.stackshare.io/service/236/yy3lVE1y.jpeg" width="100"/>
<small class='caption'><strong>PayPal</strong> everybody's favourite payment gateway. Essential. Take advantage of  offers a one touch payment gateway for mobile and <strong>delayed payments</strong>.</small>
</div>

<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/509036712601739264/mgD1tpPz.jpeg" width="100"/>
<small class='caption'><a href='https://www.braintreepayments.com/features'><strong>Braintree</strong></a> <strong>1.75% + $.30 AUD</strong> per transaction for domestic cards vs eWay's 2.6% transaction fee, easy integration, 
<li><strong>PCI compliant</strong> <a href='https://developers.braintreepayments.com/javascript+ruby/guides/drop-in'><strong>Drop-In</strong></a> solution
<li>
<a href='https://www.braintreepayments.com/features/paypal'><strong>PayPal</strong></a></li>
<li>Facilitates catpure/delayed and <a href='https://developers.braintreepayments.com/javascript+ruby/guides/recurring-billing/overview'><strong>recurring</strong></a> payments</li>
<li>Instant funds transfer</li>
</small>
</div>

<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/615875108385656832/D_nZMonl.jpg" width="100"/>
<small class='caption'><strong>Mailchimp</strong> awesome email campaign management with a generous free tier and expansion plans</small></td>
</div>

<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/616276661747609600/DLlyAL7B.png" width="100"/>
<small class='caption'><strong>New Relic</strong> powerful and insightful application monitoring</small></td>
</div>

<div class='flex-item'>
<img src="http://pbs.twimg.com/profile_images/615675308243488768/_d8TRzzL.png" width="100"/>
<small class='caption'><strong>BitBucket</strong> puts our code under version control and offers unlimited private repositories (think storage units) free</small>
</div>
</div>

### Search
<div class='flex-container'>
<div class='flex-item' style='flex: 1'>
<img src="http://img.stackshare.io/service/841/elasticsearch.png" width="100"/>
</div>
<div class='flex-item' style='flex: 9'>
<small><strong>Elasticsearch</strong> provides powerful <strong>indexed </strong>search capabilities permitting <em>autocompletion</em>, <em>suggestion</em> and <em>tolerance</em> of customer queries. Misspelt queries shouldn't mean missed sales. Elasticsearch is smart enough to ensure queries for <em>'win<strong>s</strong>ton'</em> -- believe me this is common -- yield results for <em>'winton'</em> Coupled with a proactive query field <em><a href='https://twitter.github.io/typeahead.js/' ref="external" target="_blank"> example</a></em> customers will gain greater access and insight into our vast inventory.</small>
</div>
</div>

http://stackshare.io/stackups/mailchimp-vs-campaign-monitor-vs-mad-mimi
http://stackshare.io/stackups/backbone-vs-emberjs-vs-angularjs
http://stackshare.io/stackups/rails-vs-django-vs-nodejs
https://material.angularjs.org/latest/#/layout/options


Bootstrap or Material Design for Angular
https://material.angularjs.org/latest/#/


<script type="text/javascript" src="//www.google.com/trends/embed.js?hl=en-GB&q=%22art+supplies%22,+art+materials&cmpt=q&tz=Etc/GMT-10&tz=Etc/GMT-10&content=1&cid=TIMESERIES_GRAPH_0&export=5&w=500&h=330"></script>
![](https://theartsceneonspree.s3.amazonaws.com/2015/Aug/qor-1440586633431.jpg)
